/*! NBkit | @version 1.2.0 | @author NB Communication Ltd <info@nbcommunication.com> | @copyright 2021 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("uikit")):"function"==typeof define&&define.amd?define("nbkit",["uikit"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).NBkit=e(t.UIkit)}(this,(function(t){"use strict";var e={duration:256,graphql:"/graphql",offset:0,ukAlert:{animation:!0,duration:256},ukNotification:{status:"primary",pos:"top-right",timeout:4096}};function i(e){if(Array.isArray(e))return e.join(" ");if(t.util.isPlainObject(e)){const i=[];let s;for(let n in e)if(t.util.hasOwn(e,n)){if(s=e[n],t.util.isPlainObject(s))break;t.util.isBoolean(s)&&(s=String(s)),n=t.util.hyphenate(n),i.push(`${n}: ${s}`)}return Object.keys(e).length===i.length?i.join("; "):JSON.stringify(e)}return String(e)}function s(t,e){try{return r(t=atob(t),"",!1,e)}catch(t){return""}}function n(e,i=""){return Array.isArray(e)&&(e=e.join(i)),t.util.isPlainObject(e)&&(e=JSON.stringify(e)),"string"==typeof e?btoa(e):""}function r(e,i,n=!1,r=""){if(t.util.isPlainObject(e))return e;let l;if(t.util.isNode(e)&&(l=e,e=i?t.util.data(l,i):""),n)return l&&["","data-"].forEach((e=>{let s=e+i;t.util.hasAttr(l,s)&&t.util.removeAttr(l,s)})),e?s(e,r):{};if(r&&t.util.includes(e,r))e=e.split(r);else try{const i=t.util.parseOptions(e);t.util.isEmpty(i)||(e=i)}catch(s){i&&t.util.includes(e,i)&&(e=e.split(i))}return e}function l(t,i=e.duration,s=!1){let n;return function(){const e=this,r=arguments,l=()=>{n=null,s||t.apply(e,r)},o=s&&!n;clearTimeout(n),n=setTimeout(l,i),o&&t.apply(e,r)}}function o(t){if("function"==typeof FormData&&"entries"in FormData.prototype)return Array.from(new FormData(t).entries());{let e=[],i=t.elements;for(let t,s,n,r,l=0;l<i.length;l++)if(t=i[l],s=t.tagName.toUpperCase(),("SELECT"===s||"TEXTAREA"===s||"INPUT"===s)&&(n=t.type,r=t.name,r&&!t.disabled&&"submit"!==n&&"reset"!==n&&"button"!==n&&("radio"!==n&&"checkbox"!==n||t.checked)))if("SELECT"===s){let i=t.getElementsByTagName("option");for(let t,s=0;s<i.length;s++)t=i[s],t.selected&&e.push([r,t.value])}else"file"===n?e.push([r,""]):e.push([r,t.value]);return e}}function a(e){if(t.util.isPlainObject(e))if("$options"in e)e=e.$options.name;else{const t=["name","title"];for(let i,s=0;s<t.length;s++)if(i=t[s],i in e){e=e[i];break}}return t.util.isString(e)?t.util.hyphenate(e).replace(/\s+/g,"-"):""}const u="localStorage"in window&&"sessionStorage"in window;function c(t){return/<[a-z][\s\S]*>/i.test(t)}function h(t){return c(t)?t:("<"===t.substr(0,1)?"":"<")+t+(">"===t.substr(t.length-1,1)?"":">")}function d(t){return"profiler"in window?profiler.start(t):null}function f(t){return"profiler"in window?profiler.stop(t):0}function p(t,e="."){return/.*[.,\/!?\^&\*;:{}=]$/.test(t)||(t+=e),t}function g(i,s){t.util.isUndefined(i)||t.util.isUndefined(s)||i in e&&(t.util.isPlainObject(e[i])&&t.util.isPlainObject(s)?e[i]=t.util.assign({},e[i],s):e[i]=s)}function k(e="",i={}){if(d("NBkit.ajax"),e||(e=[location.protocol,"//",location.host,location.pathname].join("")+"?ajax=1"),t.util.isPlainObject(i)||(i={}),t.util.includes(e,"#")){let t=e.split("#"),i=t[1].split("?");e=`${t[0]}${i.length>1?"?"+i[1]:""}#${i[0]}`}return i=t.util.assign({headers:{"X-Requested-With":"XMLHttpRequest"},method:"GET",responseType:"json"},i),new t.util.Promise(((s,n)=>{t.util.ajax(e,i).then((t=>{const e=m(t);f("NBkit.ajax"),e.status?s(e):n(e)}),(t=>{f("NBkit.ajax"),n(m(t.xhr,t.status,t))}))}))}function m(e,i=500,s=null){t.util.isNumber(i)||(t.util.isString(i)&&(s=i),i=500),e.status&&(i=e.status);let n=e.response;if(!t.util.isPlainObject(n))try{n=JSON.parse(n)}catch(t){s||(s=n)}if(t.util.isPlainObject(n))if("errors"in n){let t=[];for(let e=0;e<n.errors.length;e++)t.push(n.errors[e].message);n=t,i<400&&(i=0)}else"data"in n&&(n=n.data);else n=s,i=500;return{status:parseInt(i),response:n}}function b(i,s={}){const n={query:i};return t.util.isPlainObject(s)&&(n.variables=s),k(e.graphql,{data:JSON.stringify(n),headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},method:"POST"})}function y(e,i=new FormData,s=""){if(e instanceof HTMLFormElement)return new FormData(e);let n=i;for(let i in e)t.util.hasOwn(e,i)&&(t.util.isPlainObject(e[i])?y(e[i],n,i):n.append(s?`${s}[${i}]`:i,e[i]));return n}function v(t,e=""){let i=t.previousElementSibling;if(!e)return i;for(;i;){if(i.matches(e))return i;i=i.previousElementSibling}}function $(e,i,s){const n="NBkit.loadS"+("script"===e?"cript":"tyle");return d(n),new t.util.Promise(((r,l)=>{const o=document.createElement(e);let a;for(let e in i)t.util.hasOwn(i,e)&&(a=i[e],"element"===e?s=a:o.setAttribute(e,a));o.onload=()=>{f(n),r(o)},o.onerror=t=>{f(n),l(t)},t.util.append(s,o)}))}function w(e){return $("script",t.util.isPlainObject(e)?e:{src:e,async:!0},arguments.length>1?arguments[1]:"body")}function A(e){const i=t.util.isPlainObject(e)?e:{href:e};return i.rel="stylesheet",$("link",i,arguments.length>1?arguments[1]:"head")}function S(){let e={},s="",n=!1;const r=arguments;for(let i,l=0;l<r.length;l++)if(i=r[l],t.util.isBoolean(i))n=i;else if(t.util.isString(i)&&i)s=i;else if(Array.isArray(i)&&i.length){"class"in e||(e.class=[]),Array.isArray(e.class)||(e.class=[e.class]);for(let t=0;t<i.length;t++)e.class.push(i[t]);s="div"}else t.util.isPlainObject(i)&&(e=t.util.assign(e,i));const l=[];let o;for(let r in e)if(t.util.hasOwn(e,r))switch(o=e[r],r){case"tag":s||(s=o);break;case"close":n=t.util.toBoolean(o);break;default:!1!==o&&(r&&(r=t.util.hyphenate(r)),""===o||t.util.isBoolean(o)?l.push(r):(o=i(o),l.push(r?`${r}="${o}"`:o)))}let a=l.join(" ");return a=a?" "+a:"",s&&(s=s.replace(/<|>|\//gi,"")),s?`<${s+a}>`+(n?`</${s}>`:""):a}function N(e,i={},s={}){t.util.isString(i)&&(i={alt:i});const n="img"===(s=t.util.assign({focus:!1,tag:"img",ukImg:!1,src:"url"},s)).tag;let r={left:50,top:50},l=!1,o=!1;if(t.util.isPlainObject(e)&&(e.focus&&t.util.isPlainObject(e.focus)&&(r=t.util.assign(r,e.focus)),e.srcset&&(l=e.srcset),e.sizes&&e.srcset&&(o=e.sizes),e=e[s.src]),i=t.util.assign({alt:"image",width:0,height:0},i),!e)return"";const a=e.match(/(\.\d*x\d*\.)/g);if(n&&a){let e=a[0].split("x");i.width||(i.width=t.util.toNumber(e[0].replace(".",""))),i.height||(i.height=t.util.toNumber(e[1].replace(".","")))}if(!n&&s.focus){let t=i.style?i.style.split(";"):[];t.push(`background-position:${r.left}% ${r.top}%`),i.style=t.join(";")}let u;return 0!==i.width&&n||(i.width=!1),0!==i.height&&n||(i.height=!1),n||(i.alt=!1),!l&&"sizes"in i&&delete i.sizes,s.ukImg?(u={src:!!n&&"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",dataSizes:!1,dataSrc:e,dataSrcset:l,dataUkImg:s.ukImg},o&&l&&(u.dataSizes=o),i=t.util.assign(u,i)):n?(u={src:e,srcset:l,loading:"lazy"},l&&(u.sizes=o),i=t.util.assign(u,i)):i.style=`background-image:url(${e});${i.style?i.style:""}`,S(i,s.tag)}function j(e,i="",s={}){let n=!1;return t.util.isBoolean(s)?(n=s,s={}):t.util.isPlainObject(s)||(s={class:s}),t.util.isPlainObject(e)&&("href"in e?e=(s=e).href:"url"in s?(i=e[i||"title"],e=e.url):(s=e,e="#")),null===i?i=e:t.util.isPlainObject(i)?(s=i,i=""):t.util.isBoolean(i)&&(n=i,i=""),t.util.includes(e,"://")&&(n=!0),s.href=e,"target"in s||(s.target=!!n&&"_blank"),"rel"in s||(s.rel=!!n&&"noopener"),O(i,s,"a")}function O(e,i="",s=""){if(d("NBkit.wrap"),!i&&!s&&t.util.isString(e))return e;if((Array.isArray(i)||t.util.isPlainObject(i))&&(i=S(i,s)),t.util.isString(i)&&(t.util.startsWith(i,"uk-")||t.util.startsWith(i,"nb-"))&&(i=`<div class="${i}">`),i=h(i),Array.isArray(e)){let t=i.split(">")[0].replace("<","");e=e.join(`</${t.split(" ")[0]}><${t}>`)}let n;return t.util.includes(i,"></")&&!/=["|'][^"|']+(><\/)[^"|']+["|']/g.test(i)?(n=i.split("></"),i=`${n[0]}>${e}</${n.splice(1).join("></")}`):(n=i.split(">",2),i=2===n.length?`${i}${e}</${n[0].split(" ")[0].replace(/</gi,"")}>`:e),f("NBkit.wrap"),i}function B(i){if(t.util.isUndefined(i))return;Array.isArray(i)&&(i=i.join("<br>"));let s="primary",n={},r=!1,l={class:["uk-alert"]};const o=arguments;for(let e,i=1,a=0;i<o.length;i++)if(e=o[i],t.util.isBoolean(e))r=e;else if(t.util.isNumeric(e))e=t.util.toNumber(e),1==i?s=e<100||e>=400?"danger":"success":n.duration=e;else if(t.util.isString(e))s=e;else if(Array.isArray(e))for(;a<e.length;a++)l.class.push(e[a]);else if(t.util.isPlainObject(e))if("animation"in e)n=t.util.assign(n,e);else{if("class"in e){for(Array.isArray(e.class)||(e.class=e.class.split(" "));a<e.class.length;a++)l.class.push(e.class[a]);delete e.class}l=t.util.assign(l,e)}return"danger"==s&&(l.role="alert"),l.class.push("uk-alert-"+s),l.dataUkAlert=!r&&!Object.keys(n).length||t.util.assign({},e.ukAlert,n),O((r?S({type:"button",class:"uk-alert-close",title:"close",dataUkClose:!0},"button",!0):"")+O(i,c(i)?"":"p"),l,"div")}function C(i){if(t.util.isUndefined(i))return;if(t.util.isString(i)&&(i={message:i}),!t.util.isPlainObject(i))return;const s=arguments;for(let e,n=1;n<s.length;n++)e=s[n],t.util.isNumeric(e)?i.timeout=t.util.toNumber(e):t.util.isString(e)?e.includes("-")?i.pos=e:i.status=e:t.util.isPlainObject(e)&&(i=t.util.assign(e,i));t.util.isUndefined(i.message)||t.notification(t.util.assign({},e.ukNotification,i))}function E(){let e={},i={};const s=arguments;for(let n,r=1;r<s.length;r++)n=s[r],t.util.isNumeric(n)?i.ratio=t.util.toNumber(n):t.util.isString(n)?e.class=[n]:Array.isArray(n)?e.class=n:t.util.isPlainObject(n)&&(e=t.util.assign(e,n));return e.dataUkSpinner=!Object.keys(i).length||i,S(e,"span",!0)}var P=Object.freeze({__proto__:null,ajax:k,getRequestResponse:m,graphql:b,objectToFormData:y,post:function(t,e={}){return k(t,{data:y(e),method:"POST"})},getPreviousSibling:v,loadAsset:$,loadAssets:function(e){let i=[];for(let s,n=0;n<e.length;n++)s=e[n],i.push("js"===(t.util.isPlainObject(s)?s.src?s.src:s.href?s.href:"":s).substr(-2)?w(s):A(s));return t.util.Promise.all(i)},loadScript:w,loadStyle:A,attrs:S,img:N,imgBg:function(e,i={},s={},n=!1){t.util.isPlainObject(i)||(i={}),t.util.isPlainObject(s)||(t.util.isBoolean(s)&&(n=s),s={});let r=N(e,i=t.util.assign({alt:!1,class:"uk-background-cover"},i),s=t.util.assign({tag:"div",focus:!0,ukImg:!0},s));return n?`${r}</${s.tag}>`:r},link:j,wrap:O,ukAlert:B,ukNotification:C,ukSpinner:E,attrValue:i,base64Decode:s,base64Encode:n,data:r,debounce:l,formDataEntries:o,getClassName:a,hasStorage:u,isTag:c,makeTag:h,profilerStart:d,profilerStop:f,punctuateString:p,queryString:function(t){return"?"+Object.keys(t).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`)).join("&")},setOption:g}),T={args:"msgConfirm",props:["msgConfirm"],data:{button:null,buttonText:"",captcha:null,response:"",scroller:null,status:0},beforeConnect:function(){d("NBkit.Form.beforeConnect");const e=this.$el,i=t.util.$("input[type=hidden]._post_token",e);if(i){const e=e=>{t.util.attr(i,"name",e.tokenName),t.util.attr(i,"value",e.tokenValue)};let s=u?sessionStorage.getItem("CSRF"):"";if(s)try{e(JSON.parse(s))}catch(t){}else b("{CSRF {tokenName tokenValue}}").then((t=>{200===t.status&&(s=t.response.CSRF,e(s),u&&sessionStorage.setItem("CSRF",JSON.stringify(s)))}),t.util.noop)}this.scroller=t.util.$(S({hidden:!0},"div",!0)),t.util.append(e,this.scroller),f("NBkit.Form.beforeConnect")},connected:function(){d("NBkit.Form.connected");const i=this,s=this.$el;setTimeout((function(){t.util.trigger(s,"onload",i),f("NBkit.Form.connected")}),e.duration)},events:{submit:function(i){d("NBkit.Form.events.submit"),i.preventDefault(),i.stopPropagation();const s=this.$el;let n=[];const r=t.util.$$(".nb-form-errors",s);if(r.length&&t.util.remove(r),t.util.$$("input[required], select[required], textarea[required]",s).forEach((e=>{t.util.attr(e,"aria-invalid",!1),t.util.remove(t.util.$(".nb-form-error",e.closest(".nb-form-content")))})),t.util.$$("input[required], select[required], textarea[required]",s).forEach((i=>{if(!i.validity.valid){t.util.attr(i,"aria-invalid",!0);let r=t.util.attr(i,"title");r||(r=i.validationMessage);const l=i.id,o=l?t.util.$(`label[for=${l}]`,s):null;r=p(r),n.push(j("#"+(l||s.id),(o?o.innerHTML+": ":"")+r,{class:"uk-link-reset",dataUkScroll:{duration:e.duration,offset:e.offset}}));const a=O(r,"uk-text-danger nb-form-error"),u=t.util.$("[role=alert]",i.closest(".nb-form-content"));u?t.util.append(u,a):t.util.before(i,a)}})),n.length)return t.util.trigger(s,"invalid",this),this.reset(),t.util.before(t.util.$(".uk-grid",s),B(O(O(n,"li"),"ul"),"danger",["nb-form-errors"])),UIkit.scroll(this.scroller,{duration:e.duration,offset:e.offset}).scrollTo(s),t.util.on('.nb-form-errors a[href^="#"]',"click",(function(){t.util.$(t.util.attr(this,"href")).focus()})),!1;if(this.button=t.util.$("button[type=submit]",s),this.msgConfirm){const t=this;UIkit.modal.confirm(this.msgConfirm).then((()=>{t.send()}),(()=>!1))}else this.send();f("NBkit.Form.events.submit")}},methods:{complete:function(){const i=this.$el;let s=this.response;if(t.util.trigger(i,"complete",this),t.util.isPlainObject(s)){let i=0;if(s.notification&&(C(s.notification),i="timeout"in s.notification?s.notification.timeout:e.duration),"callback"in s){let n=s.callback,r=null;Array.isArray(n)&&(n=s.callback[0],r=s.callback[1]),n=n.split("."),t.util.isUndefined(r)&&(r=null);let l=window[n[0]];for(let t=1;t<n.length;t++)n[t]in l&&(l=l[n[t]]);if(l.apply(this,r),i=e.duration,!0===s.callback[2])return}if("redirect"in s)return s.redirect&&setTimeout((()=>{t.util.isString(s.redirect)?window.location.href=s.redirect:window.location.reload()}),i),void this.reset();s=s.message}if(t.util.remove(this.button),this.captcha&&t.util.remove(this.captcha),t.util.$$("input, select, textarea",i).forEach((e=>{t.util.attr(e,"disabled",!0)})),s){const n=t.util.$(".uk-grid",i);t.util.before(n||i,B(s,this.status)),UIkit.scroll(this.scroller,{duration:e.duration,offset:e.offset}).scrollTo(i)}},error:function(e,i){this.status=e,this.response=i,t.util.trigger(this.$el,"error",this),t.util.includes([401,412,500],e)?(this.reset(),UIkit.modal.alert(B(i,"danger"))):this.complete()},reset:function(){this.button&&t.util.html(this.button,(new DOMParser).parseFromString(this.buttonText,"text/html").body.childNodes),this.captcha&&grecaptcha.reset()},send:function(){d("NBkit.Form.send");const e=this.$el,i=t.util.attr(e,"method");this.buttonText=t.util.html(this.button),t.util.html(this.button,E(.467)),this.captcha=t.util.$(".g-recaptcha",e),t.util.trigger(e,"beforeSend",this);const s=this;k(e.action,{data:new FormData(e),method:i||"POST"}).then((t=>{s.status=t.status,s.response=t.response,t.response?s.complete():s.error(t.status,"Error"),f("NBkit.Form.send")}),(t=>{s.error(t.status,t.response),f("NBkit.Form.send")}))}}},D={args:"renderData",props:{clsMore:String,clsMoreButton:String,config:Object,error:String,form:String,loadMore:String,message:String,noResults:String,query:String,render:String,renderData:String,variables:Object},data:{clsMore:"uk-text-center uk-margin-large-top",clsMoreButton:"uk-button-primary",count:0,config:{},cursor:0,error:"Error",errors:[],form:null,init:0,initQuery:!1,items:[],loadMore:"More",message:"",noResults:"",query:"",remaining:0,render:"renderItems",renderData:"",response:{},selectors:"",start:0,status:0,total:0,variables:{}},beforeConnect:function(){d("NBkit.Json.beforeConnect");const t=["start","selectors"];for(let e,i=0;i<t.length;i++)e=t[i],this.variables[e]&&(this[e]=this.variables[e]);this.init=this.start,this.errors=[this.error],uk.includes(this.clsMore,"nb-json-more")||(this.clsMore+=" nb-json-more"),uk.includes(this.clsMoreButton,"uk-button-")&&!uk.includes(this.clsMoreButton,"uk-button ")&&(this.clsMoreButton+=" uk-button");const e=this;this.form&&uk.isUndefined(this._connected)&&uk.on(this.form,"submit reset",(function(t){"submit"===t.type?(t.preventDefault(),t.stopPropagation(),e.get(o(this),this)):e.get("")}));const i=uk.$$("[data-nb-json-filter]");i.length&&uk.on(i,"click",(function(t){t.preventDefault();const s=uk.data(this,"nb-json-filter");uk.removeClass(i,"uk-active"),s&&uk.addClass(this,"uk-active"),e.get(s)})),f("NBkit.Json.beforeConnect")},connected:function(){d("NBkit.Json.connected");const t=this.$el,e=this;if(uk.on(t,"error",(()=>uk.html(t,B(e.errors,e.status)))),this.renderData)this.response=s(this.renderData),this.parse(),this.count&&(uk.html(t,this.renderItems()),uk.trigger(t,"render",this),uk.trigger(t,"complete",this)),uk.removeAttr(t,"data-"+this.$name),this.$destroy();else{let t=0;if(this.form){const e=uk.$$("input, select, textarea",uk.$(this.form));for(let i=0;i<e.length;i++)e[i].value&&t++}t?uk.trigger(e.form,"submit"):this.request()}f("NBkit.Json.connected")},events:[{name:"click",delegate:()=>".nb-json-more button",handler:function(t){this.request()}}],methods:{get:function(t,e){if(Array.isArray(t)){if(!uk.isUndefined(e)){const s=t,n=s.length;let l={};const o=(t,e,i="")=>{Array.isArray(t)&&(i=e,e=t.length>1?t[1]:"",t=t[0]),i&&!uk.includes(t,i)&&(t+=i),uk.includes(t,"[]")&&(t=t.replace("[]","")),t in l||(l[t]=[]),l[t].push(e)};for(let t,i,l,a,u,c,h,d=0;d<n;d++)if(t=s[d][1],t){if(i=s[d][0],u=uk.$$(`[name="${i}"]`,e),c=u.length,c)if(1===c)a=u[0];else for(let e,i=0;i<c;i++)if(e=u[i],e.value===t){a=e;break}if(l="=",a)if(h=r(a,"nb-json"),uk.isPlainObject(h)&&!uk.isEmpty(h))if("values"in h){let e=h.values[t];for(let t in h.selectors)uk.hasOwn(h.selectors,t)&&o(t,e[h.selectors[t]])}else Array.isArray(h.selectors)?h.selectors.forEach((t=>{o(t.split(l),l)})):h.selectors&&o(h.selectors.split(l),l);else o(i,t,l);else c>1&&uk.includes(t,"|")&&o(i,t,l)}if(t=[],!uk.isEmpty(l))for(var i in l)uk.hasOwn(l,i)&&t.push(i+l[i].join("|"))}}else t=[t];this.selectors&&t.push(this.selectors),this.initQuery=!1,this.start=this.init,this.total=0,this.variables.selectors=t.join(","),this.variables.start=this.start,uk.html(this.$el,""),this.request()},parse:function(){let t;for(let e in this.response)if(uk.hasOwn(this.response,e)&&(t=this.response[e],Array.isArray(t)?(this.config.query=e,this.items=t,this.count=t.length):"getTotal"===e&&(this.total=t),this.count&&this.total))break},renderItems:function(t){uk.isUndefined(t)&&(t=this.items);let e=this.render;return e in window&&(e=window[e]),uk.isFunction(e)&&Array.isArray(t)?e.call(this,t,this.config):(this.status=500,"")},request:function(){d("NBkit.Json.request");const t=this.$el,e=t.id?t.id.split("_")[0]:n(this.query);let i=uk.$(".nb-json-more",t);this.count=0,this.remaining=0,uk.remove(".uk-alert",t),i||(i=uk.$(O(O(this.loadMore,{type:"button",class:this.clsMoreButton},"button"),this.clsMore)),uk.append(t,i)),i.style.display="";const s=uk.$("button",i);uk.attr(s,"disabled",!0),uk.html(s,uk.html(s).replace(this.loadMore,E(.467))),this.variables.start=this.start,this.initQuery||(u&&sessionStorage.getItem(e)&&(this.cursor=parseInt(sessionStorage.getItem(e))),this.initQuery=!0,uk.trigger(t,"initQuery",this));const r=this;b(this.query,this.variables).then((n=>{r.status=n.status,r.response=n.response;if(r.response){uk.removeAttr(s,"disabled");const n=uk.$(".uk-spinner",s);if(n&&(uk.before(n,r.loadMore),uk.remove(n)),r.parse(),r.remaining=r.total?r.total-r.start-r.count:-1,r.message){let e=uk.$(".nb-json-message",t);e||(e=uk.$(O("","nb-json-message uk-margin-top uk-margin-bottom")),uk.prepend(t,e));const i=r.message.replace("{count}",r.count+r.start-r.init).replace("{total}",r.total-r.init);uk.html(e,"jsonMessage"in window?jsonMessage(i):B(i,"primary"))}if(r.count?(uk.before(i,r.renderItems()),uk.trigger(t,"render",r)):(r.errors=[r.noResults],r.status=404,uk.trigger(t,"error",r)),u){if(r.start){let t=sessionStorage.getItem(e);t=t?parseInt(t):0,t++,sessionStorage.setItem(e,t)}r.cursor&&(r.cursor--,r.start||sessionStorage.removeItem(e),uk.once(t,"complete",(()=>uk.trigger(s,"click"))))}r.remaining<=0||!r.count||!r.loadMore?i.style.display="none":r.start=r.start+r.count,uk.trigger(t,"complete",r)}else uk.trigger(t,"error",r);f("NBkit.Json.request")}),(e=>{r.status=e.status,r.errors=e.response,uk.trigger(t,"error",r),f("NBkit.Json.request")}))}}},I={args:"breakpoint",props:{back:String,breakpoint:Number,toggle:String},data:{active:void 0,back:"Back",breakpoint:960,clsBack:"back",clsDesktop:"desktop",clsDrop:"uk-navbar-dropdown",clsHidden:"uk-hidden",isDesktop:!0,navbar:void 0,ns:void 0,toggle:".uk-navbar-toggle",ukNavbar:{},ukNavbarToggle:{}},beforeConnect:function(){if(d("NBkit.Nav.beforeConnect"),this.ns=a(this),this.clsBack=`${this.ns}-${this.clsBack}`,this.clsDesktop=`${this.ns}-${this.clsDesktop}`,this.navbar=this.$el.closest("[data-uk-navbar]"),!this.navbar)throw new Error("The UIkit Navbar component could not be found.");this.ukNavbar=t.util.parseOptions(t.util.data(this.navbar,"uk-navbar")),this.ukNavbarToggle={},this.toggle&&(this.toggle=t.util.$(this.toggle),this.toggle&&(this.ukNavbarToggle=t.util.parseOptions(t.util.data(this.toggle,"uk-toggle")))),f("NBkit.Nav.beforeConnect")},connected:function(){d("NBkit.Nav.connected");const i=this,s=this.$el.parentElement,n=this.ns+"-open",r="."+this.clsDrop;t.util.addClass(s,this.clsDesktop),this.dropdowns(),this.checkBreakpoint(),t.util.addClass(s,this.ns);const o=t.util.$(`.uk-active > a[href="${window.location.pathname}"]`);this.active=o?o.closest(r):null,t.util.$$(".uk-parent > a").forEach((e=>{t.util.on(e,"click",(t=>i.active=t.target.nextElementSibling))})),t.util.$$("."+this.clsBack).forEach((e=>{t.util.on(e,"click",(e=>{let s=e.target.closest(r);if(i.active=null,s){s=s.parentElement;let e=s.closest("div");e&&t.util.trigger(e,"show"),i.active=s.closest(r)}}))})),t.util.on(s,"beforeshow",(e=>{if(!i.isDesktop&&e.target===s&&(t.util.addClass(t.util.$("body"),n),i.active)){let t=i.active,e=[];do{t&&e.push(t),t=t.parentElement,t=t?t.closest(r):null}while(t);e.reverse().forEach((t=>{t[UIkit.data].drop.show()}))}})),t.util.on(s,"hide",(e=>e.target==s?t.util.removeClass(t.util.$("body"),n):null)),t.util.on(window,"resize",l((()=>i.checkBreakpoint()),e.duration)),f("NBkit.Nav.connected")},events:[{name:"switch",handler:function(){d("NBkit.Nav.events.switch");const e=this.$el,i=this.navbar,s=this.toggle,n=t.util.$$("[data-uk-drop]",e),l=this.clsDesktop,o=this.ns+"-mobile",a=this.ns+"-title",u=this.clsBack,c="uk-navbar-dropdown-nav",h=this.clsHidden;let p=e.parentElement;if(s){let e=t.util.attr(s,"href");e&&"#"!==e||(e=r(s,"uk-toggle").target),e&&(p=t.util.$(e))}if(this.isDesktop)t.util.hasClass(p,l)||(t.util.removeClass(p,o),t.util.addClass(p,l),t.util.removeAttr(p,"hidden",!0),n.length&&t.util.removeAttr(n,"hidden"),s&&t.util.attr(s,"hidden"),i&&(UIkit.navbar(i).$destroy(),UIkit.navbar(i,this.ukNavbar)),t.util.addClass(s,h),t.util.$$("."+c,e).forEach((e=>{t.util.remove(t.util.$("."+u).parentElement),t.util.remove(t.util.$("."+a).parentElement)})));else if(!t.util.hasClass(p,o)){if(t.util.removeClass(p,l),t.util.addClass(p,o),t.util.attr(p,"hidden",!0),n.length&&t.util.attr(n,"hidden",!0),s&&t.util.removeAttr(s,"hidden"),i){const t=this.ukNavbar;UIkit.navbar(i).$destroy(),t.mode="click",t.animation=this.ukNavbarToggle.animation,UIkit.navbar(i,t)}t.util.removeClass(s,h);const r=this,d="."+this.clsDrop;t.util.$$("."+c,e).forEach((e=>{const i=v(e.closest(d),"a");t.util.prepend(e,O([j(t.util.attr(i,"href"),i.innerText||i.textContent,a),j({class:u,dataUkToggle:{animation:r.ukNavbarToggle.animation,cls:"uk-open",target:"#"+e.closest(d).id}},r.back)],"li"))}))}f("NBkit.Nav.events.switch")}}],methods:{checkBreakpoint:function(){const e=this.isDesktop,i=window.innerWidth>this.breakpoint,s=this;if(e&&i){let e,i;t.util.$$("> li > a",this.$el).forEach((t=>{e=document.createElement("div"),e.style.position="absolute",e.style.left="-99in",e.style.whiteSpace="nowrap",e.style.fontFamily=window.getComputedStyle(t,null).getPropertyValue("font-family"),e.style.fontSize=window.getComputedStyle(t,null).getPropertyValue("font-size"),e.style.paddingLeft=window.getComputedStyle(t,null).getPropertyValue("padding-left"),e.style.paddingRight=window.getComputedStyle(t,null).getPropertyValue("padding-right"),e.innerHTML=t.textContent,document.body.appendChild(e),i=e.clientWidth,document.body.removeChild(e),t.offsetWidth&&t.offsetWidth<i&&(s.isDesktop=!1)})),s.isDesktop||(this.breakpoint=window.innerWidth)}else this.isDesktop=i;this.isDesktop!==e&&t.util.trigger(this.$el,"switch")},dropdowns:function(e){t.util.isUndefined(e)&&(e=this.$el);const i=this;let s,n,r;t.util.$$("> li > ul, > li > div",e).forEach((e=>{s=[],i.$el.id?s.push(i.$el.id):i.$el.parentElement.id&&s.push(i.$el.parentElement.id),s.push(i.ns),t.util.hasAttr(e,"id")?s.push(t.util.attr(e,"id")):(n=e.previousElementSibling,n||(n=t.util.$("a",e.closest(".uk-parent"))),r=t.util.attr(n,"href"),r&&"#"!==r?("/"===r.substr(0,1)&&(r=r.slice(1)),s.push(r.replace(/\//g,"-"))):s.push(t.util.hyphenate(n.textContent.replace(/\s/g,"")))),t.util.wrapAll(e,S({id:s.join("_"),class:i.clsDrop},"div",!0)),t.util.addClass(e,"uk-navbar-dropdown-nav"),i.dropdowns(e)}))}}},x={args:"text",props:["text"],beforeConnect:function(){d("NBkit.Obfuscate.beforeConnect");const e=s(this.text);let n=e;if(t.util.isPlainObject(e)){n=e.text;for(let s in e)t.util.hasOwn(e,s)&&"text"!==s&&("href"!==s||n||(n=e[s]),t.util.attr(this.$el,s,i(e[s])))}this.$el.innerHTML=n,t.util.removeAttr(this.$el,"data-"+this.$name),f("NBkit.Obfuscate.beforeConnect")}},U=Object.freeze({__proto__:null,nbForm:T,nbJson:D,nbNav:I,nbObfuscate:x});const q=t.util.noop;return q.options=e,q.util=P,q.version="1.2.0",t.util.each(U,((t,e)=>{window.UIkit.component(e,t)})),window.nb=P,window.uk=t.util,d("NBkit.init"),t.util.ready((()=>{const e=t.util.$("header");e&&g("offset",e.offsetHeight);const i=t.util.$$("a[target=_blank]");if(i){let e;i.forEach((i=>{e=t.util.attr(i,"rel"),e=t.util.isString(e)?e.split(" "):[],t.util.includes(e,"noopener")||e.push("noopener"),t.util.attr(i,"rel",e.join(" "))}))}f("NBkit.init")})),q}));
